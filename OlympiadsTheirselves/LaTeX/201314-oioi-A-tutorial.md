Необхідно дістатися з точки $(r_1, c_1)$ тору у точку $(r_2, c_2)$ тору
по \<\<зацикленому\>\> простору тора. Скориставшися відомим принципом
незалежності переміщень, можна побачити, що переміщення в
горизонтальному і вертикальному напрямках не залежать одне від одного.
Розглянемо переміщення як перетин вертикальних і горизонтальних сторін
клітинки. Незалежно від траєкторії, необхідно перетнути лише певну
конкретну кількість вертикальних ліній (позначимо цю
кількість $\Delta{}r$) і горизонтальних ліній (відповідно $\Delta{}c$).
(Звісно, якщо нерозглядати відверто немінімальні шляхи, де одна й та ж
лінія перетинається багатократно.) Тоді відповідь на задачу є
${\Delta{}r+\Delta{}c}$, оскільки для зміни будь-якої з координат на 1
необхідно затратити 1 секунду.

Є 2 способи переміститися з рядка $r_1$ у $r_2$--- перетинаючи край
початкового (до згинів і склеювань) прямокутника і не перетинаючи.
Вважаємо спочатку, що ${r_1{<}r_2}$. Тоді не перетинаючи край витратимо
${(r_2{-}r_1)}$сек, а перетинаючи спочатку доберемося до рядка 1
(${(r_1{-}1)}$сек), потім дорядка $n$ (1 сек), ізнього у$r_2$---
(${(n{-}r_2)}$сек). Сумарно ${(r_1{-}r_2{+}n)}$сек. Тобто, треба вибрати
мінімум зі значень ${(r_2{-}r_1)}$ (не перетинаючи край)
і${(r_1{-}r_2{+}n)}$ (черезкрай). Але це лише для випадку ${r_1{<}r_2}$,
апри ${r_1{>}r_2}$ аналогічними міркуваннями отримуються схожі, але інші
формули ${(r_1{-}r_2)}$ і${(r_2{-}r_1{+}n)}$. Щобнезадумуватися, яка
зкоординат більша, можна використати формулу

$$\Delta{}r \, = \, \min\bigl((r_1-r_2+n) \bmod n,\quad (r_2-r_1+n) \bmod n\bigr).$$

З $\Delta{}c$ слід вчинити аналогічно, потім додати
${\Delta{}r+\Delta{}c}$.
